<!DOCTYPE html>
<meta charset="utf-8">
<style>

text {
  font: 10px sans-serif;
}

div{
position: absolute;
left: 50%;
top: 75%;
}

h1 { 
font-size: 30px;
font-weight: 300;
letter-spacing: -2px;
margin: .3em 0 .1em 0;
top: 5px;
left: 43%;
position: absolute;
}

img{
height: 125px;
width: 125px;
position: absolute;
bottom: 10%;
right: 20%;
}

p{
width: 500px;
height: 150px;
border: 0px;
position: absolute;
top: 150px;
right: 5%


 
}


</style>
<body>
<h1> Energy and Utilities Bubble</h1>
<p> This bubble chart shows the distribution of energy sources for heating occupied housing units across 19 counties in North Carolina for the year 2010. Each county is represented by a different color. Each has a label to depict the enery source it represents. The energy source may be Gas, Tank LP, Electricity, Fuel oil, other fuel, or no heating fuel. The size of the bubble changes based on how much housing units use that particular source of energy for heating. The color of the bubble varies according to the county it represents.<p>
<img scr="img/dan.jpg" alt="Key">
<script src="http://d3js.org/d3.v3.min.js"></script>
<div>
<script>

var diameter = 960,
    format = d3.format(",d"),
    color = d3.scale.category20c();

var bubble = d3.layout.pack()
    .sort(null)
    .size([diameter, diameter])
    .padding(1.5);

var svg = d3.select("body").append("svg")
    .attr("width", diameter)
    .attr("height", diameter)
    .attr("class", "bubble");

d3.json("flare.json", function(error, root) {
  var node = svg.selectAll(".node")
      .data(bubble.nodes(classes(root))
      .filter(function(d) { return !d.children; }))
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

  node.append("title")
      .text(function(d) { return d.className + ": " + format(d.value); });

  node.append("circle")
      .attr("r", function(d) { return d.r; })
      .style("fill", function(d) { return color(d.packageName); });

  node.append("text")
      .attr("dy", ".3em")
      .style("text-anchor", "middle")
      .text(function(d) { return d.className.substring(0, d.r / 3); });
});

// Returns a flattened hierarchy containing all leaf nodes under the root.
function classes(root) {
  var classes = [];

  function recurse(name, node) {
    if (node.children) node.children.forEach(function(child) { recurse(node.name, child); });
    else classes.push({packageName: name, className: node.name, value: node.size});
  }

  recurse(null, root);
  return {children: classes};
}

d3.select(self.frameElement).style("height", diameter + "px");

</script>
</div>
</body>